# 项目路线图

## 大屏参考连接

```
https://cloud.zqwlcloud.com/#/enterprise/role
账号：15882432516
密码：py15882432516
```

## 地图需求（AI）：

1. 初始化地图时，需要按照所有项目节点坐标，计算所有的坐标的集合的中心坐标，并设置地图的中心；
2. 按照项目及项目节点坐标，在地图上给每个项目画出有方向的折线，在折线节点上方显示无边框的透明背景节点名称；
3. 在折线居中位置上方显示显示无边框的透明背景项目名称标签，创建项目名称标签时，判断折线是东西走线，还是南北走向；然后设置项目名称标签的横向显示，还是纵向显示；计算每个项目所有节点的中心坐标，横向显示在项目的中心坐标向上偏移60px;纵向显示在项目的中心坐标向右偏移60px;
4. 标记图标使用图片，需要设置图片的偏移量
5. 每个项目的线路需要使用 PulseLineLayer 实现水流效果；
6. 初始地图时，需要按照项目，在项目线路的起始节点下方显示"0 KM"文本，在项目线路的结束节点下方显示实际的公里数文本（调用方法'aMpaCalculateTotalDistance'计算），需要设置anchor: 'center'；
7. 初始化地图时，需要 对 标记 使用 setExtData 设置扩展数据，扩展数据需要包含节点名称、节点坐标、节点公里数、节点状态、节点颜色（需要计算），水流量，压力水温，且将扩展数据传递给模版"project.ProjectRouteMapInfoWindow"；
8. 初始化地图时需要设置 mouseover/mouseout 事件；
9. 当缩放比例 < 阈值：确保(mouseover/mouseout)事件存在，使用鼠标悬停(mouseover/mouseout)来显示/隐藏信息窗体，而不是显示覆盖物，信息窗体需要显示在节点上方，覆盖物需要中心对齐节点；
10. 当缩放比例 >= 阈值：才使用固定的覆盖物显示，当缩放比例 >= 阈值：才使用固定的覆盖物显示所有的节点上方，覆盖物需要中心对齐节点，同时移除(mouseover/mouseout)事件；
11. 接收 后端 bus 发送来数据，使用'updatePipelineNodeData'方法更新节点数据，若节点状态异常，将加点数据数据更新到'this.state.exception_nodes'，若节点恢复正常，则从'this.state.exception_nodes'中移除;监听'this.state.exception_nodes'的变化，不管缩放比例是否大于还是小于阈值，都使用覆盖物的方式显示或隐藏信息窗体内容，同时需要附加传值 showCloseButton=true，同时弹框的关闭按钮需要回传关闭信息窗体的方法，便于用户自行关闭信息船体。
12. 移动地图需要重新计算覆盖物显示位置。
13. 按照逻辑顺序，顺序生成代码；

## 显示器分辨率适配

1. 适配1024*768分辨率
2. 适配1366*768分辨率
3. 适配1920*1080分辨率
4. 适配2560*1440分辨率
5. 适配3840*2160分辨率
6. 小于1024*768分辨率，显示错误信息
